// Code generated by openapi-generator-go DO NOT EDIT.
//
// Source:
//
//	Title: Test
//	Version: 0.1.0
package generatortest

import (
	"encoding/json"

	validation "github.com/go-ozzo/ozzo-validation/v4"
)

// MapWithValue is an object.
type MapWithValue map[string]*string

// NewMapWithValue instantiates a new MapWithValue with default values overriding them as follows:
// 1. Default values specified in the MapWithValue schema
// 2. Default values specified per MapWithValue property
func NewMapWithValue() MapWithValue {
	m := MapWithValue{}

	return m
}

// UnmarshalJSON implements the json.Unmarshaler interface for MapWithValue. It set the default values for the MapWithValue type
func (m *MapWithValue) UnmarshalJSON(data []byte) error {
	// Set default values
	*m = NewMapWithValue()

	// Unmarshal using an alias to avoid an infinite loop
	type alias MapWithValue
	err := json.Unmarshal(data, (*alias)(m))
	if err != nil {
		return err
	}

	var zero *string
	for k, v := range *m {
		if v == zero {
			(*m)[k] = new(string)
			*(*m)[k] = "value"
		}
	}
	return nil
}

// Validate implements basic validation for this model
func (m MapWithValue) Validate() error {
	errors := validation.Errors{}
	for k, v := range m {
		if err := validation.Validate(v, validation.NilOrNotEmpty, validation.Length(2, 0)); err != nil {
			errors[k] = err
		}
	}
	return errors.Filter()
}
